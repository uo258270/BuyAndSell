<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<html lang="es">

<head th:replace="~{fragments/head}" />

<body>
    <div id="content">
        <nav th:replace="~{fragments/nav}" />
        <div class="container">
            <h2 th:text="#{login.login}"></h2>
            <form id="loginForm" class="form-horizontal" method="post" action="/login">
                <div class="form-group">
                    <label class="control-label col-sm-2" for="username">Email:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="username" name="username" required="true"
                            aria-required="true" aria-label="Correo electrónico" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-2" for="password">Contraseña:</label>
                    <div class="col-sm-10">
                        <input type="password" class="form-control" id="password" name="password" required="true"
                            aria-required="true" aria-label="Contraseña" />
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="button" class="btn btn-primary" onclick="validateLoginForm()"
                            aria-label="Iniciar sesión">Iniciar sesión</button>
                        <span id="loginError" class="text-danger" style="display:none;"></span>
                    </div>
                </div>
                <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
            </form>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <span class="text-muted" th:text="#{registration.not.registered.yet}"></span>
                    <a href="/signup" class="search-button" aria-label="Registrarse">
                        <span th:text="#{signup}">Registrarse</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <footer class="navbar navbar-fixed-bottom" th:replace="~{fragments/footer}" />

    <script th:inline="javascript">
        function validateLoginForm() {
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;

            if (!username || !password) {
                document.getElementById('loginError').innerText = 'Por favor, complete todos los campos.';
                document.getElementById('loginError').style.display = 'inline';
                return;
            }

            document.getElementById('loginForm').submit();
        }
    </script>
</body>

</html>
